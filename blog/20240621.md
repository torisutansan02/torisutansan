---
title: 'あいだに、Two Pointers, Sorting, HashSets'
date: 'June 18, 2024'
---

## Product of Array Except Self
In an integer array nums, return array answer such that answer[i] is equal to the product of all elements of nums except nums[i].

The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer.

Run an algorithm with O(n) time and without using division.

### Examples
- Input: nums = [1, 2, 3, 4].
- Output: [24, 12, 8, 6].

- Input: nums = [-1, 1, 0, -3, 3].
- Output: [0, 0, 9, 0, 0].

### Concept
Multiply the product of values before and after index.
- These two values multiply to get the value.
- 1, 2, 3, 4.
- Prefix: 1, 2, 6, 24.
- Postfix: 24, 24, 12, 4.
- Output: 24, 12, 8, 6.
- Time: O(n).
- Memory: O(n).
How to make this easier?
- 1, 2, 3, 4.
- Pre = 1, then 2, then 6.
- Output = 1, 1, 2, 6.
- Post = 1, then 4, then 12, then 24.
- Updated Output = 24, 12, 8, 6.

### Code
```python
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        res = [1] * (len(nums))

        prefix = 1
        for i in range(len(nums)):
            res[i] = prefix
            prefix *= nums[i]

        postfix = 1
        for i in range(len(nums) - 1, -1, -1):
            res[i] *= postfix
            postfix *= nums[i]
        
        return res
```